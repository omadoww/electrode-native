package {{package}};

import android.os.Bundle;
import android.os.Parcel;
import android.os.Parcelable;
import android.support.annotation.NonNull;
import android.support.annotation.Nullable;

import com.walmartlabs.electrode.reactnative.bridge.Bridgeable;

import static com.walmartlabs.electrode.reactnative.bridge.util.BridgeArguments.getNumberValue;

public class {{className}} implements Parcelable, Bridgeable {

    {{#properties}}
    {{#isRequired}}@NonNull{{/isRequired}} private {{javaType}} {{name}};
    {{/properties}}

    private {{className}}() {
    }

    private {{className}}(Builder builder) {
        {{#properties}}
        this.{{name}} = builder.{{name}};
        {{/properties}}
    }

    private {{className}}(Parcel in) {
        this(in.readBundle());
    }

    public {{className}}(@NonNull Bundle bundle) {
        {{#properties}}
        {{#isRequired}}
        this.{{name}} = {{{getRequiredPropertyBuilder}}};
        {{/isRequired}}
        {{^isRequired}}
        this.{{name}} = {{{getOptionalPropertyBuilder}}};
        {{/isRequired}}
        {{/properties}}
    }

    {{#className}}
    {{#customObject}}
    public static final Creator<{{className}}> CREATOR = new Creator<{{className}}>() {
        @Override
        public {{className}} createFromParcel(Parcel in) {
            return new {{className}}(in);
        }

        @Override
        public {{className}}[] newArray(int size) {
            return new {{className}}[size];
        }
    };
    {{/customObject}}
    {{/className}}

    {{#properties}}
    {{#description}}
    /**
    * {{description}}
    *
    * @return {{javaType}}
    */
    {{/description}}
    {{#isRequired}}
    @NonNull
    {{/isRequired}}
    {{^isRequired}}
    @Nullable
    {{/isRequired}}
    public {{javaType}} get{{className}}() {
        return {{name}};
    }

    {{/properties}}

    @Override
    public int describeContents() {
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeBundle(toBundle());
    }

    @NonNull
    public Bundle toBundle() {
        Bundle bundle = new Bundle();
        {{#properties}}
        {{#isRequired}}
        {{{setPropertyBuilder}}};
        {{/isRequired}}
        {{^isRequired}}
        if({{name}} != null) {
            {{{setPropertyBuilder}}};
        }
        {{/isRequired}}
        {{/properties}}
        return bundle;
    }

    public static class Builder {
        {{#properties}}
        {{#isRequired}}
        private final {{javaType}} {{name}};
        {{/isRequired}}
        {{^isRequired}}
        private {{javaType}} {{name}};
        {{/isRequired}}
        {{/properties}}

        public Builder({{#properties}}{{#isRequired}}@NonNull {{javaType}} {{name}}{{^isLastRequiredItem}}, {{/isLastRequiredItem}}{{/isRequired}}{{/properties}}) {
            {{#properties}}
            {{#isRequired}}
            this.{{name}} = {{name}};
            {{/isRequired}}
            {{/properties}}
        }
        {{#properties}}
        {{^isRequired}}

        @NonNull
        public Builder {{name}}(@Nullable {{javaType}} {{name}}) {
            this.{{name}} = {{name}};
            return this;
        }
        {{/isRequired}}
        {{/properties}}

        @NonNull
        public {{className}} build() {
            return new {{className}}(this);
        }
    }
}